<%=@lonlat%>


<p id="notice"><%= notice %></p>
<div class="col-lg-12">
                                <div class="main-card mb-6 card">
                                    <div class="card-body">
                                      <h5 class="card-title">Reporte</h5>
                                      
 <div class="row justify-content-end ">

  <div class="col-md-3">
 
  </div>
    </div>
 <div class="row">
 <div class="col-md-2"><p>
  <strong>Nombre:</strong>
   <%=@json[0]["nombre"]%>
</p>

  </div>
  <div class="col-md-2">
    <p>
  <strong>Apellido:</strong>
 <%= @json[0]["apellido"] %>
</p>
     
  </div>
  <div class="col-md-2">
    <p>
  <strong>Edad:</strong>
  <%= @json[0]["edad"] %>
</p>
  </div>
  <div class="col-md-2">
    <p>
  <strong>Sexo:</strong>
  <%= @json[0]["sexo"] %>
</p>
  </div>
  <div class="col-md-2">
    <p>
  <strong>Arbo:</strong>
   <%= @json[0]["arbo_nombre"] %>
</p>

  </div>
  <div class="col-md-2">
    <p>
  <strong>Serotipo:</strong>
  <%= @json[0]["serotipo_nombre"] %>
</p>

  </div>
  <div class="col-md-2">
    <p>
  <strong>Barrio:</strong>
  <%= @json[0]["barrio_nombre"] %>
</p>
  </div>

  <div class="col-md-2">
    <p>
  <strong>Cuidad:</strong>
    <%= @json[0]["cuidad_nombre"] %>
</p>
  </div>
  <div class="col-md-2">
    <p>
  <strong>Distrito:</strong>
    <%= @json[0]["distrito_nombre"] %>
</p>
  </div>
 <div class="col-md-2">
    
  </div>
<div class="col-md-2">
    
  </div>
  
</div>
<div class="row">
  <div class="col-md-12" id="map" style="height: 720px">
  x
  x
</div>
  </div>
  <div class="row ">
   </br>
  </div>
  <div class="row justify-content-end">
   <%= link_to positivos_path do %>
  <i class="pe-7s-back"></i>
   <span>Volver</span>
<% end %>        

<span class="input-group-append">
  </div>
</div>

</div>


</div>

<script>
var map = L.map('map').setView([ <%=@json[0]['y']%>,<%=@json[0]['x']%>], 13);


var icon;


function determineColor(arbo) {
  if ( arbo === 'Dengue') {
    icon = L.icon ({
      iconUrl: "/assets/marker-icon-red.png",
  shadowUrl: "/assets/marker-shadow.png",
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
        shadowSize: [41, 41]
    });
  } else if ( arbo === 'Zika' ) {
    icon = L.icon ({
      iconUrl: "/assets/marker-icon-green.png",
  shadowUrl: "/assets/marker-shadow.png",
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
        shadowSize: [41, 41]
    });
  } else {
    icon = L.icon ({
      iconUrl: "/assets/marker-icon-yellow.png",
  shadowUrl: "/assets/marker-shadow.png",
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
        shadowSize: [41, 41]
    }); 
  }
}
var temp = determineColor(   "<%= @json[0]["arbo_nombre"] %>");

var marker = L.marker([ <%=@json[0]['y']%>,<%=@json[0]['x']%>], {icon: icon}).addTo(map).bindPopup("Arbo: <%= @json[0]['arbo_nombre']%> Edad: <%= @json[0]['edad']%> Sexo: <%= @json[0]['sexo']%> <br> Fecha: <%= @json[0]['fecha_notificacion']%> Estado: <%= @json[0]['estado']%>  <br> Barrio: <%= @json[0]['barrio_nombre']%> Distrito: <%= @json[0]['distrito_nombre']%>"



  ).openPopup();
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);


</script>